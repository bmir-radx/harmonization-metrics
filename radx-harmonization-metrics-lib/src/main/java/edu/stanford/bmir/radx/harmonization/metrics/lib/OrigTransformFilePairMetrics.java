package edu.stanford.bmir.radx.harmonization.metrics.lib;

import java.util.Optional;

/*
Metrics per OrigTransformFilePair. Each OrigTranformFilePair
should have one corresponding OrigTransformFilePairMetrics
generated by the OrigTransformFilePairMetricsGenerator.
 */
public record OrigTransformFilePairMetrics(
        ReducedFileName pairName,
        ProgramId programId,
        StudyId studyId,
        Optional<Integer> versionOrig,
        Optional<Integer> nDataElementsOrig,
        Optional<Integer> nHarmonizableDataElementsOrig,
        Optional<Integer> nHarmonizedDataElementsOrig,
        Optional<Integer> versionTransform,
        Optional<Integer> nDataElementsTransform,
        Optional<Integer> nHarmonizableDataElementsTransform,
        Optional<Integer> nHarmonizedDataElementsTransform,
        Integer nMissedHarmonizableDataElements,
        Integer nHarmonizedDataElements,
        Integer nNonHarmonizableDataElements) {

    public boolean hasMissedHarmonizableElements() {
        return nMissedHarmonizableDataElements > 0;
    }

    public boolean hasHarmonizedElements() {
        return nHarmonizedDataElements > 0;
    }

    public boolean isHarmonizable() {
        return hasMissedHarmonizableElements();
    }

    public boolean isPartiallyHarmonized() {
        return hasMissedHarmonizableElements() && hasHarmonizedElements();
    }

    public boolean isHarmonized() {
        return !hasMissedHarmonizableElements();
    }

    public boolean isTriviallyHarmonized() {
        return !hasMissedHarmonizableElements() && !hasHarmonizedElements();
    }
}